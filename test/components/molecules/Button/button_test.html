<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Button component test suite</title>

    <script src="../../../../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../../../node_modules/web-component-tester/browser.js"></script>

    <script type="module" src="../../../../src/components/molecules/Button/index.js"></script>
</head>
<body>
    <script>
      // HACK(keanulee): The Redux package assumes `process` exists - mock it here before
      // the module is loaded.
      window.process = {
        env: {
          NODE_ENV: 'production'
        }
      };
    </script>
    <test-fixture id="click">
        <template>
            <buv-button></buv-button>
        </template>
    </test-fixture>

    <script type="module">
      describe('Button test suite', function() {
        describe('when the button is clicked', function () {
          it('should set the text to "Spinner"', function () {
            const el = fixture('click');
            const rawButtonComponent = el.shadowRoot.querySelectorAll('buv-button-raw')[0];
            const button = rawButtonComponent.shadowRoot.querySelectorAll('button')[0];
            button.click();

            // allow for repaint
            setTimeout(() => { expect(button.innerHTML).to.equal('Spinner'); }, 0);
          });
        });
      });
    </script>
</body>
</html>